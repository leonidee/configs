# -----------------------------------------------------------------------------
# GENERAL CONFIGURATIONS
# -----------------------------------------------------------------------------
# set-option -sa terminal-overrides ",xterm*:Tc"
set -ga terminal-overrides ",*256col*:Tc"
# set-option -g default-terminal 'screen-254color'
set -g default-terminal "xterm-256color"
# set-option -g terminal-overrides ',xterm-256color:RGB'

# Change the prefix key to C-a
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# Sort sessions by theis names
bind s choose-tree -sZ -O name

# Reload configurations
unbind r
bind r source-file "$XDG_CONFIG_HOME/tmux/tmux.conf"; display-message "Config reloaded"

# Turn the mouse on, but without copy mode dragging
set -g mouse on 

# ?
setw -g xterm-keys on
# Faster command sequences
# set -s escape-time 500

# Set time for command repeat.
# The period of time (in miliseconds) in which after pressing
# prefix key tmux will accept command key another time.
set -sg repeat-time 1
# ?
set -s focus-events on

set-window-option -g mode-keys vi

# Manage selections with vim-like keys
# bind-key -T copy-mode-vi 'v' send -X begin-selection 
bind-key -T copy-mode-vi v send-keys -X begin-selection
# bind-key -T copy-mode-vi 'y' send -X copy-selection 
bind-key -T copy-mode-vi y send-keys -X copy-selection
unbind -T copy-mode-vi MouseDragEnd1Pane
# -----------------------------------------------------------------------------
# DISPLAY
# -----------------------------------------------------------------------------
# Start windows indexing at 1
set -g base-index 1

# Make pane numbering consistent with windows
setw -g pane-base-index 1

set-window-option -g pane-base-index 1

# Status bar position
set-option -g status-position bottom # Variants: top, bottom

# Rename window to show current program.
# For example if `nvim` opened window will be renamed to `nvim`
# setw -g automatic-rename on

# Renumber windows when a window is closed
# set -g renumber-windows on 
set-option -g renumber-windows on

# Window title
set-option -g automatic-rename on
set-option -g set-titles on
set-option -g set-titles-string "#S #I:#P #W:#T"

# Colors for pane borders
set -g pane-border-style "bg=default"
set -g pane-active-border-style "bg=default fg=default"

# ?
# bind C-a send-prefix

# set -g set-titles on          # set terminal title
# set -g display-panes-time 800 # slightly longer pane indicators display time
# set -g display-time 1000      # slightly longer status messages display time
# set -g status-interval 10     # redraw status line every 10 seconds
#
# -----------------------------------------------------------------------------
# NAVIGATION
# -----------------------------------------------------------------------------

# WINDOW NAVIGATION
# Select previous window
unbind p
bind -r C-p previous-window

# Select next window
unbind n
bind -r C-n next-window

# Move to last active window
# bind Tab last-window

# Split curent window horizontally
unbind %  # Remove default keymap
# `-c "#{pane_current_path}"` - Means open same path in new pane as in the current
bind -r H split-window -v -c "#{pane_current_path}"

# Split current window vertically
unbind '"' # Remove default keymap
bind -r V split-window -h -c "#{pane_current_path}"

# PANE NAVIGATION
# Set mode keys to vim
setw -g mode-keys vi
# Left pane
bind -r j select-pane -L
# Down pane
bind -r l select-pane -D
# Up pane
bind -r k select-pane -U
# Right pane
bind -r \; select-pane -R  # With `prefix` + `;`

# Swap current pane with the next one
bind -r > swap-pane -D
# Swap current pane with the previous one
bind -r < swap-pane -U

# -----------------------------------------------------------------------------
# PLUGINS
# -----------------------------------------------------------------------------
# Plugin manager: `tpm`
# Repo: https://github.com/tmux-plugins/tpm
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'

# `catppuccin` theme and powerline
# https://github.com/catppuccin/tmux
# set -g @plugin 'catppuccin/tmux'
# set -g @catppuccin_flavour 'frappe' # Variants: latte, frappe, macchiato, mocha

# set -g @catppuccin_window_left_separator "█"
# set -g @catppuccin_window_right_separator "█ "
# set -g @catppuccin_window_middle_separator "  █"
# set -g @catppuccin_window_number_position "right"

# set -g @catppuccin_window_default_fill "number"
# set -g @catppuccin_window_default_text "#W"

# set -g @catppuccin_window_current_fill "number"
# set -g @catppuccin_window_current_text "#W"

# set -g @catppuccin_status_modules_right "host session"
# set -g @catppuccin_status_left_separator  ""
# set -g @catppuccin_status_right_separator " "
# set -g @catppuccin_status_fill "icon"
# set -g @catppuccin_status_connect_separator "no"

# set -g @catppuccin_directory_text "#{pane_current_path}"

# set -g @plugin "arcticicestudio/nord-tmux"

# https://github.com/2KAbhishek/tmux2k
set -g @plugin '2kabhishek/tmux2k'

set -g @tmux2k-theme "duo icons"
# set -g @tmux2k-start-icon "session"
# set -g @tmux2k-start-icon ""
set -g @tmux2k-start-icon ""

set -g @tmux2k-left-plugins "ping bandwidth"
set -g @tmux2k-right-plugins "cpu ram"
set -g @tmux2k-bg-main 'default' # default - transparent
set -g @tmux2k-bg-alt 'default'
set -g @tmux2k-git-colors "default black"
set -g @tmux2k-cpu-colors "default black"
set -g @tmux2k-ram-colors "default green"
set -g @tmux2k-bandwidth-colors "default black"
set -g @tmux2k-ping-colors "default black"
set -g @tmux2k-window-colors "default"
set -g @tmux2k-compact-windows "false"
set -g @tmux2k-text '#cdcdcd'
set -g @tmux2k-duo-bg "default"
set -g @tmux2k-duo-fg "default"
set -g @tmux2k-refresh-rate 5
set -g @tmux2k-purple '#bf58ff' # ?


# https://github.com/joshmedeski/tmux-nerd-font-window-name
set -g @plugin 'joshmedeski/tmux-nerd-font-window-name'

# https://github.com/TheSast/tmux-transient-status
# set -g @plugin 'thesast/tmux-transient-status'

# https://draculatheme.com/tmux
# set -g @plugin 'dracula/tmux'

# available plugins: battery, cpu-usage, git, gpu-usage, ram-usage, tmux-ram-usage, network, network-bandwidth, network-ping, ssh-session, attached-clients, network-vpn, weather, time, mpc, spotify-tui, kubernetes-context, synchronize-panes
# set -g @dracula-plugins "ssh-session"
# it can accept `hostname` (full hostname), `session`, `shortname` (short name), `smiley`, `window`, or any character. 
# set -g @dracula-show-left-icon session
# set -g @dracula-show-powerline false
# set -g @dracula-show-flags false

# set -g @dracula-ssh-session-colors "default dark_gray"
# set -g @dracula-window-colors "default dark_gray"

# # default is 1, it can accept any number and 0 disables padding.
# set -g @dracula-left-icon-padding 1
# set -g @dracula-border-contrast false
# set -g @dracula-show-empty-plugins true

# https://github.com/2kabhishek/tmux-tea
set -g @plugin '2kabhishek/tmux-tea'



# Initialize `tpm` plugin manager.
# ! This line should be at the very bottom of `tmux.conf`.
# run "$HOME/.tmux/plugins/tpm/tpm"
run "$XDG_CONFIG_HOME/tmux/plugins/tpm/tpm"
# -----------------------------------------------------------------------------
