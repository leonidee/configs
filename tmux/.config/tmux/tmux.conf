# -----------------------------------------------------------------------------
# GENERAL CONFIGURATIONS
# -----------------------------------------------------------------------------
# Change the prefix key to C-a
unbind C-b
set -g prefix C-a

# Sort sessions by theis names
bind s choose-tree -sZ -O name

# Reload configurations
unbind r
bind -r r source-file ~/.config/tmux/tmux.conf

# Turn the mouse on, but without copy mode dragging
set -g mouse on 

# ?
setw -g xterm-keys on
# Faster command sequences
# set -s escape-time 500

# Set time for command repeat.
# The period of time (in miliseconds) in which after pressing
# prefix key tmux will accept command key another time.
set -sg repeat-time 1
# ?
set -s focus-events on
#
# Change the default $TERM to tmux-256color
set -g default-terminal screen-256color

set-window-option -g mode-keys vi

# Manage selections with vim-like keys
bind-key -T copy-mode-vi 'v' send -X begin-selection 
bind-key -T copy-mode-vi 'y' send -X copy-selection 
unbind -T copy-mode-vi MouseDragEnd1Pane
# -----------------------------------------------------------------------------
# DISPLAY
# -----------------------------------------------------------------------------
# Start windows indexing at 1
set -g base-index 1

# Make pane numbering consistent with windows
setw -g pane-base-index 1

# Rename window to show current program.
# For example if `nvim` opened window will be renamed to `nvim`
# setw -g automatic-rename on

# Renumber windows when a window is closed
set -g renumber-windows on 


# ?
# bind C-a send-prefix


# set -g set-titles on          # set terminal title
# set -g display-panes-time 800 # slightly longer pane indicators display time
# set -g display-time 1000      # slightly longer status messages display time
# set -g status-interval 10     # redraw status line every 10 seconds
#
# -----------------------------------------------------------------------------
# NAVIGATION
# -----------------------------------------------------------------------------

# WINDOW NAVIGATION
# Select previous window
unbind p
bind -r C-p previous-window

# Select next window
unbind n
bind -r C-n next-window

# Move to last active window
# bind Tab last-window

# split current window horizontally
unbind % 
bind -r H split-window -v
# split current window vertically
unbind '"'
bind -r V split-window -h

# PANE NAVIGATION
# Left pane
bind -r j select-pane -L
# Down pane
bind -r l select-pane -D
# Up pane
bind -r k select-pane -U
# Right pane
bind -r \; select-pane -R  # With `prefix` + `;`

# Swap current pane with the next one
bind -r > swap-pane -D
# Swap current pane with the previous one
bind -r < swap-pane -U
# -----------------------------------------------------------------------------

# Some tweaks to the status line
# set -g status-right "%H:%M"
# set -g window-status-current-style "underscore"

# If running inside tmux ($TMUX is set), then change the status line to red
# %if #{TMUX}
# set -g status-bg red
# %endif


# Some extra key bindings to select higher numbered windows
# bind F1 selectw -t:10
# bind F2 selectw -t:11
# bind F3 selectw -t:12
# bind F4 selectw -t:13
# bind F5 selectw -t:14
# bind F6 selectw -t:15
# bind F7 selectw -t:16
# bind F8 selectw -t:17
# bind F9 selectw -t:18
# bind F10 selectw -t:19
# bind F11 selectw -t:20
# bind F12 selectw -t:21

# A key to toggle between smallest and largest sizes if a window is visible in
# multiple places
# bind F set -w window-size

# Keys to toggle monitoring activity in a window and the synchronize-panes option
# bind m set monitor-activity
# bind y set synchronize-panes\; display 'synchronize-panes #{?synchronize-panes,on,off}'

# Create a single default session - because a session is created here, tmux
# should be started with "tmux attach" rather than "tmux new"
# new -d -s0 -nirssi 'exec irssi'
# set -t0:0 monitor-activity on
# set -t0:0 aggressive-resize on
# neww -d -ntodo 'exec emacs ~/TODO'
# setw -t0:1 aggressive-resize on
# neww -d -nmutt 'exec mutt'
# setw -t0:2 aggressive-resize on
# neww -d
# neww -d
# neww -d

# -----------------------------------------------------------------------------
# PLUGINS
# -----------------------------------------------------------------------------
#
# Plugin manager: `tpm`
# Repo: https://github.com/tmux-plugins/tpm
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# Theme plugin
# Repo: https://github.com/jimeh/tmux-themepack
# set -g @plugin 'jimeh/tmux-themepack'
# # Set theme. All available themes: https://github.com/jimeh/tmux-themepack#themes
# set -g @themepack 'powerline/double/purple'

# `catppuccin` theme and powerline
# Repo: https://github.com/catppuccin/tmux
set -g @plugin 'catppuccin/tmux'
set -g @catppuccin_flavour 'frappe' # Variants: latte, frappe, macchiato, mocha

# `catppuccin` configurations
# set -g @catppuccin_window_left_separator " █"
# set -g @catppuccin_window_right_separator "█ "
# set -g @catppuccin_window_number_position "right"
# set -g @catppuccin_window_middle_separator " █"

# set -g @catppuccin_window_default_fill "number"

# set -g @catppuccin_window_current_fill "number"
# set -g @catppuccin_window_current_text "#{pane_current_path}"

# set -g @catppuccin_status_modules_right "application session"
# set -g @catppuccin_status_left_separator  "█"
# set -g @catppuccin_status_right_separator " █"
# # set -g @catppuccin_status_middle_separator "█ "
# set -g @catppuccin_status_right_separator_inverse "yes"
# set -g @catppuccin_status_fill "all"
# set -g @catppuccin_status_connect_separator "no"

# `tmux2k` theme and powerline
# Repo: https://github.com/2KAbhishek/tmux2k
# set -g @plugin '2kabhishek/tmux2k'

# `tmux2k` configurations
# set -g @tmux2k-show-left-icon "session"
# set -g @tmux2k-border-contrast false

# Repo: https://github.com/wfxr/tmux-power
# set -g @plugin 'wfxr/tmux-power'
# set -g @tmux_power_theme 'coralk

# These plugins enhanced session managment
set -g @plugin 'tmux-plugins/tmux-resurrect' 
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-sessionist'

set -g @resurrect-capture-pane-contents 'on'
set -g @continuum-restore 'on'

# Initialize `tpm` plugin manager.
# ! This line should be at the very bottom of `tmux.conf`.
run "$HOME/.tmux/plugins/tpm/tpm"
# -----------------------------------------------------------------------------
